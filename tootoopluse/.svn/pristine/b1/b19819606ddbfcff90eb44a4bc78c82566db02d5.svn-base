package com.ninetowns.tootoopluse.fragment;

import java.util.List;

import android.os.Bundle;
import android.text.TextUtils;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.GridView;
import android.widget.ImageButton;
import android.widget.TextView;

import com.lidroid.xutils.ViewUtils;
import com.lidroid.xutils.view.annotation.ViewInject;
import com.ninetowns.library.net.RequestParamsNet;
import com.ninetowns.tootoopluse.R;
import com.ninetowns.tootoopluse.bean.MyJoinmemberAct;
import com.ninetowns.tootoopluse.helper.ConstantsTooTooEHelper;
import com.ninetowns.tootoopluse.helper.TootooeNetApiUrlHelper;
import com.ninetowns.tootoopluse.parser.MyJoinMemGroupParser;
import com.ninetowns.ui.fragment.BaseFragment;

public class MyJoinMemberFragment extends
		BaseFragment<List<MyJoinmemberAct>, MyJoinMemGroupParser> {
	@ViewInject(R.id.tv_rem_info)
	private TextView mTvInfo;
	@ViewInject(R.id.tv_comit)
	private TextView mTVComit;
	@ViewInject(R.id.et_left)
	private EditText mETLeft;
	@ViewInject(R.id.gl_rember)
	private GridView mGV;
	@ViewInject(R.id.ibtn_left)
	private ImageButton ibtnLeft;
	@ViewInject(R.id.tv_title)
	private TextView mTVTitle;
	@ViewInject(R.id.ibtn_right)
	private ImageButton ibtnRight;
	private View remberCount;
	private String groupid;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		groupid = getActivity().getIntent().getStringExtra(
				ConstantsTooTooEHelper.GROUP_ID);
	}

	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		remberCount = inflater.inflate(R.layout.myjonimemberact, null);
		ViewUtils.inject(this, remberCount);
		return remberCount;
	}

	@Override
	public void onActivityCreated(Bundle savedInstanceState) {
		super.onActivityCreated(savedInstanceState);
		loadData();
	}

	private void loadData() {
		super.onLoadData(true, true, true);
	}

	@Override
	public MyJoinMemGroupParser setParser(String str) {
		MyJoinMemGroupParser parser = new MyJoinMemGroupParser(str);
		String info = parser.getInfo();
		if (!TextUtils.isEmpty(info)) {
			mTvInfo.setText(info);
		}
		return parser;
	}

	@Override
	public void getParserResult(List<MyJoinmemberAct> parserResult) {
		if (parserResult != null) {

		}

	}

	@Override
	public RequestParamsNet getApiParmars() {
		RequestParamsNet par = new RequestParamsNet();
		par.setmStrHttpApi(TootooeNetApiUrlHelper.MY_FREE_GROUP_URL_MEMBER);
		if (!TextUtils.isEmpty(groupid))
			par.addBodyParameter(
					TootooeNetApiUrlHelper.ALL_MEMBER_EXIT_GROUP_GROUPID,
					groupid);
		return par;
	}

}
